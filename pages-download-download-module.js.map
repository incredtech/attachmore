{"version":3,"sources":["webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./src/app/pages/download/download.component.html","webpack:///./src/app/pages/download/download.component.scss","webpack:///./src/app/pages/download/download.component.ts","webpack:///./src/app/pages/download/download.module.ts"],"names":[],"mappings":"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","file":"pages-download-download-module.js","sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;return b.open(\"HEAD\",a,!1),b.send(),200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","module.exports = \"<div class=\\\"fs-hero hero-img pdd-btm-30\\\" style=\\\"background-image: url(assets/images/bg/bg1.jpg)\\\">\\r\\n  <div class=\\\"dark-overlay\\\">\\r\\n    <div class=\\\"container\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-12 mrg-top-125 text-center \\\">\\r\\n          <div class=\\\"width-65 bg-opaque upload-banner p-10 mrg-horizon-auto \\\">\\r\\n            <div class=\\\"m-10 p-20\\\">\\r\\n              <p class=\\\"font-weight-bold font-size-18 white-500-fg m-0\\\"> File Download</p>\\r\\n              <am-download-preview [attachmentId]=\\\"attachmentId\\\"></am-download-preview>\\r\\n              <button mat-flat-button color=\\\"accent\\\" (click)=\\\"whenDownloadClicked()\\\" class=\\\"white-500-fg mrg-top-20 border-radius-0\\\">Download</button>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".dw-text {\\n  margin: 0 0 5px 0;\\n  font-weight: 500 !important;\\n  padding: 0;\\n  font-family: Montserrat; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZG93bmxvYWQvQzpcXFdPUktTUEFDRVxcRE9ULU5FVFxcYXR0YWNobW9yZVxcQXR0YWNoTW9yZS5XZWIvc3JjXFxhcHBcXHBhZ2VzXFxkb3dubG9hZFxcZG93bmxvYWQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBaUI7RUFDakIsNEJBQTJCO0VBQzNCLFdBQVU7RUFDVix3QkFDSixFQUFDIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZG93bmxvYWQvZG93bmxvYWQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZHctdGV4dCB7XHJcbiAgICBtYXJnaW46IDAgMCA1cHggMDtcclxuICAgIGZvbnQtd2VpZ2h0OiA1MDAgIWltcG9ydGFudDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbiAgICBmb250LWZhbWlseTogTW9udHNlcnJhdFxyXG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\n\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport { AttachmentService } from '../../services/attachment.service';\r\nimport { DownloadAttachment, SecuritySettings } from '../../models';\r\nimport { DialogService } from '../../services/dialog.service';\r\nimport { SettingsService } from '../../services/settings.service';\r\n\r\n@Component({\r\n  selector: 'am-download',\r\n  templateUrl: './download.component.html',\r\n  styleUrls: ['./download.component.scss']\r\n})\r\nexport class DownloadComponent implements OnInit {\r\n\r\n  attachmentId = 0;\r\n  securitySettings: SecuritySettings = <SecuritySettings>{};\r\n\r\n  constructor(private route: ActivatedRoute,\r\n    public dialogService: DialogService,\r\n    private attachmentService: AttachmentService,\r\n    private settingService: SettingsService) { }\r\n\r\n  ngOnInit() {\r\n    this.route.params.subscribe((res: Params) => {\r\n      this.attachmentId = res.attachmentId;\r\n      this.getSecuritySettings();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get Secuirty Settings\r\n   */\r\n  getSecuritySettings() {\r\n    this.settingService.getSecuritySettings(this.attachmentId).subscribe(res => {\r\n      this.securitySettings = res;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Download file when button clicked\r\n   */\r\n  whenDownloadClicked() {\r\n    if (this.securitySettings.accessEmail || this.securitySettings.accessPassword) {\r\n      this.dialogService.downloadAttachmentDialog(this.securitySettings).subscribe(res => {\r\n        if (res) {\r\n          this.downloadAttachment(res);\r\n        }\r\n      });\r\n    } else {\r\n      this.downloadAttachment({accessEmail: '', password: ''} as DownloadAttachment);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Download Attachment\r\n   * @param downloadAttachmentDetails\r\n   */\r\n  downloadAttachment(downloadAttachmentDetails: DownloadAttachment) {\r\n    const JSON_DATA: DownloadAttachment = {\r\n      attachmentId: this.attachmentId,\r\n      ...downloadAttachmentDetails\r\n    };\r\n\r\n    this.attachmentService.downloadAttachment(JSON_DATA).subscribe((res) => {\r\n      if (this.attachmentService.attachment.fileDetails && this.attachmentService.attachment.fileDetails.length) {\r\n        if (this.attachmentService.attachment.fileDetails.length > 1) {\r\n          saveAs(res, `${this.attachmentService.attachment.attachmentName}.zip`);\r\n        } else {\r\n          saveAs(res, `${this.attachmentService.attachment.attachmentName}.${this.attachmentService.attachment.fileDetails[0].extension}`);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule, Route } from '@angular/router';\r\n\r\nimport { DownloadComponent } from './download.component';\r\nimport { AmSharedModule } from 'src/app/shared/am-shared.module';\r\nimport { NotFoundComponent } from '../not-found/not-found.component';\r\n\r\nconst DOWNLOAD_ROUTES: Route[] = [\r\n  {\r\n    path: ':attachmentId', component: DownloadComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [DownloadComponent],\r\n  imports: [CommonModule, RouterModule.forChild(DOWNLOAD_ROUTES), AmSharedModule]\r\n})\r\nexport class DownloadModule { }\r\n"],"sourceRoot":""}